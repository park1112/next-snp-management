# Next.js Firebase Authentication Template

이 프로젝트는 Next.js와 Firebase를 사용하여 이메일 기반의 로그인, 회원가입, 메인 페이지, 그리고 프로필 페이지 기능을 제공하는 인증 템플릿입니다. 반응형 UI와 모듈화된 컴포넌트 구조, 널 체크 및 예외 처리를 적용하여 안정적인 코드를 목표로 합니다.

## 주요 기능


- **이메일 인증:** Firebase의 이메일/비밀번호 인증을 사용한 로그인 및 회원가입.
- **페이지 구성:** 로그인, 회원가입, 메인, 프로필 페이지 구현.
- **반응형 디자인:** 다양한 디바이스에서 최적화된 UI 제공.
- **글로벌 상태 관리:** React Context를 활용한 인증 상태 관리.
- **모듈화된 컴포넌트:** 재사용 가능한 `InputField`, `Button`, `AuthForm` 컴포넌트.
- **안정성:** 널 체크와 try-catch를 통한 예외 처리 구현.


## 수정해야될것
   - 계약관리는 추후 수정예정 
      - 농가의 농지별로 계약관련된 내용 추가해야함, 

   - 작업등록은 두가지로, 운송등록을 따로 등록해야함.

   - 일정캘린더에 캘린더 부분 수정해야함, 

   - 작업후 정산관리로 넘어가서 정산관련내용 입력해야함 ,
   
   - 정산관리 , 

   - 계약관리 
      - 농지를 선택하여 모두 선택하여 계약서의 내용을 선택한다?(작업등록폼에서 작업 농지 선택 컴포넌트로 따로 만들어서 재사용한다.)
      - 계약시 평수, 실평수 , 선택하여, 계산할수 있도록 함, 
      - 단가,(평당, 개당,) , 계약일, 계약금, 계약금지급일, 중도금, 중도금지급일, 잔금, 잔금지급일, 특이사항, (잔금은 작업전에 지급한다, 계약면적은 gps측정후 등등,)
      
      - 그럼 각 농지마다 계약된 내용이 묶어서 나타남
      - 계약 날짜가 다가오면 미리 알린다. 
      - 계약금 중도금 날짜별로 계약들을 가지고 온다. 
      - 모두 완료된 계약은 따로 관리한다. 


      - 추후 추가사항 
         - 결제소속 별 농가작업등록, 등 결제소속별로 관리할수 있어야함 . 
         - 작업 등록시, 
      - 뽑기 준비중 : 작업반장 지정
      - 뽑기완료 : 작업비 지정,
      - 자르기 준비중 : 작업반장 지정,
      - 자르기 완료 : 작업비 지정
      - 뽑기 자르기 같이 : 작업반장 지정
      - 뽑기 자르기 완료 : 작업비 지정
      - 망담기 준비중 : 작업반장 지정
      - 망담기 완료 : 작업비 지정 & 수확량 지정
      - 운송 준비중 : 운송기사 지정
      - 운송완료 : 운송비 지정 

   - 화면 설계서 , https://v0.dev/

## 앞으로 구축해야될 작업들 

# 앱 수정 방법 및 작업 일정 제안

## 1. 데이터 구조 개선 및 타입 정리 (최우선 과제)

### 개선 방향:

1. **통합 타입 시스템 구축**:
   - `/src/types` 폴더의 모든 타입 정의를 검토하고 통일성 있게 재구성
   - 네이밍 컨벤션 일관성 유지 (camelCase 사용)
   - 확장 가능한 구조로 설계 (창고관리, 재고관리, 출고관리, 자재관리까지 고려)

2. **Firebase 데이터 구조 정리**:
   - 현재 뒤죽박죽인 데이터 변수명과 구조 체계화
   - 컬렉션 구조 최적화 (농가, 농지, 작업자, 작업일정, 계약, 정산 등)
   - 참조 관계 명확화 (ID 참조 방식 일관성 유지)

### 세부 작업 내용:

1. **공통 인터페이스 정의**:
   ```typescript
   // common.ts에 추가
   export interface BaseEntity {
     id: string;
     createdAt: Date;
     updatedAt: Date;
     createdBy: string;
     memo?: string;
   }
   
   export interface AddressInfo {
     full: string;
     detail?: string;
     zipcode?: string;
     subdistrict?: string;
     coordinates?: Coordinates;
   }
   
   export interface Coordinates {
     latitude: number;
     longitude: number;
   }
   
   export interface BankInfo {
     bankName: string;
     accountNumber: string;
     accountHolder: string;
   }
   ```

2. **확장된 타입 구조 설계**:
   - 현재 구조를 유지하되, 확장 가능하도록 개선
   - 상위 인터페이스를 상속받아 세부 타입 구현
   - 재고관리/창고관리를 위한 새로운 타입 추가 준비

3. **Firebase 컬렉션 구조 표준화**:
   - 컬렉션 명명 규칙 통일 (복수형 사용)
   - 서브컬렉션 구조 최적화
   - 인덱싱 전략 수립

## 2. 우선순위 작업 일정 (데이터 구조 개선 후)

### 1단계: 작업일정/정산 기능 개선 (1-2주)

1. **작업일정 디테일 페이지 완성**:
   - 디테일 페이지에 필요한 데이터 구조 정의
   - UI/UX 개선 및 직관적인 업데이트 인터페이스 구현
   - 작업 상태 변경 시스템 최적화

2. **작업내역 디테일 페이지 추가정산 기능**:
   - 추가정산 인터페이스 구현
   - 정산 이력 관리 기능 추가
   - 작업팀별 정산 상태 추적 시스템

3. **작업일정 캘린더 페이지 개선**:
   - 영화관 시간표 스타일의 UI 구현
   - 농가 위치(면단위)별 스케줄 표시 기능
   - 필터링 및 검색 기능 강화

### 2단계: 시스템 안정성 및 UX 개선 (1주)

1. **fields/map 무한로딩 버그 해결**:
   - Vercel 배포 환경에서의 지도 로딩 이슈 디버깅
   - 비동기 로딩 최적화
   - 폴백 UI 구현

2. **공통 컴포넌트 개선 및 로딩 시스템 구현**:
   - 자주 사용하는 컴포넌트 재사용성 강화
   - 중복 등록 방지를 위한 로딩 상태 관리
   - 트렌드에 맞는 로딩 UI 디자인

3. **설정 페이지 완성**:
   - 사용자 설정 기능 구현
   - 시스템 설정 관리

### 3단계: 시스템 확장 및 모니터링 (1-2주)

1. **사용자 활동 로깅 시스템 구현**:
   - 등록, 수정, 삭제 등 사용자 활동 기록
   - 감사 로그 조회 인터페이스
   - 관리자 권한 관리

2. **확장 기능 준비 작업**:
   - 창고관리, 재고관리, 출고관리, 자재관리를 위한 데이터 구조 설계
   - 초기 UI/UX 설계
   - 기존 시스템과의 통합 계획

## 3. 구체적인 구현 전략

### 데이터 구조 개선 접근법

1. **일관된 네이밍 컨벤션 적용**:
   - 모든 변수명과 함수명에 camelCase 적용
   - 컬렉션명은 복수형으로 통일 (farmers, fields, workers 등)
   - 타입 이름은 PascalCase로 통일

2. **효율적인 관계 설계**:
   - 농가-농지-작업일정 간의 관계 최적화
   - 작업자-작업일정-정산 관계 명확화
   - 계약-농지-농가 간의 다대다 관계 효율적 관리

3. **Firebase Firestore 구조 최적화**:
   - 컬렉션 구조: /farmers, /fields, /workers, /schedules, /contracts, /payments
   - 서브컬렉션 활용: /farmers/{farmerId}/fields, /schedules/{scheduleId}/steps
   - 복합 쿼리를 위한 인덱스 설계

### UI/UX 개선 전략

1. **일관된 디자인 시스템 적용**:
   - 공통 컴포넌트 라이브러리 구축
   - 색상, 타이포그래피, 간격 등 디자인 토큰 표준화
   - 반응형 디자인 최적화

2. **사용자 친화적 인터페이스**:
   - 직관적인 탐색 경로 설계
   - 복잡한 작업도 단계별로 쉽게 진행할 수 있는 UI
   - 실시간 피드백 및 알림 시스템

3. **성능 최적화**:
   - 데이터 로딩 최적화
   - 지연 로딩 및 페이지네이션 적용
   - 사용자 인터랙션 최적화

## 4. 작업 일정 타임라인

### 1주차: 데이터 구조 설계 및 타입 정리
- 모든 타입 정의 분석 및 재구성
- Firebase 컬렉션 구조 최적화
- 기본 인터페이스 및 타입 설계

### 2-3주차: 작업일정/정산 기능 개선
- 작업일정 디테일 페이지 구현
- 추가정산 기능 개발
- 일정 캘린더 개선

### 4주차: 시스템 안정성 및 UX 개선
- 지도 무한로딩 버그 해결
- 공통 컴포넌트 및 로딩 시스템 개선
- 설정 페이지 완성

### 5-6주차: 시스템 확장 및 모니터링
- 사용자 활동 로깅 시스템 구현
- 확장 기능 데이터 구조 설계
- 기존 시스템과 확장 기능 통합 준비

## 5. 권장사항 및 모범 사례

1. **코드 품질 관리**:
   - ESLint 및 Prettier 설정으로 코드 일관성 유지
   - 단위 테스트 및 통합 테스트 작성
   - 코드 리뷰 프로세스 적용

2. **버전 관리 및 배포 전략**:
   - Git 브랜치 전략 수립 (feature/develop/main)
   - Semantic Versioning 적용
   - CI/CD 파이프라인 구축

3. **확장성 및 유지보수성**:
   - 모듈식 아키텍처 설계
   - 관심사 분리 원칙 적용
   - 문서화 철저히 수행

## 결론

이 프로젝트는 농업 관리 시스템으로서 농가, 농지, 작업, 계약 등 다양한 측면을 관리합니다. 가장 시급한 과제는 데이터 구조와 타입 정의를 개선하는 것이며, 이를 통해 앞으로의 확장성과 유지보수성을 크게 향상시킬 수 있습니다.

제안된 접근 방식과 타임라인을 따라 체계적으로 작업을 진행하면 시스템의 안정성을 높이고 사용자 경험을 개선할 수 있을 것입니다. 특히 창고관리, 재고관리 등의 확장 기능을 염두에 두고 데이터 구조를 설계하는 것이 중요합니다.

필요하시다면 특정 부분에 대한 더 상세한 구현 전략이나 코드 예시를 제공해 드릴 수 있습니다. 또한 작업 진행 과정에서 발생하는 문제점에 대한 해결책도 논의할 수 있습니다.


**추후 수정사항**

   3. 작업일정 캘린더 페이지 완성, 좀더 직관적인 UI로 스케줄만 나타내는것이 아닌, 영화관에 시간표를 나타내는것처럼 농가의 위치(면단위)별 스케줄을 표시해주었으면 좋겠어 ! 
   5. 많이 사용하는 컴포넌트는 공동으로 관리하고 재사용하고, 버튼등 생성등록을 할때에는 버튼을 여러번 누르고 생성을 중복으로 하지 않게끔 안전하게 로딩페이지를 추가하여, 관리하였으면 좋겠어. 로딩창은 공통컴포넌트에서 요즘트렌드의 디자인으로 디자인하여 사용하고 싶어. 
   6. 셋팅창을 추가완성해줘 . 
   7. 유저들의 등록,수정,삭제등을 로그로 기록하고, 관리하였으면 좋겠어, 


## 버전 히스토리
- **v0.0.17** 
   **카테고리 작물 종류관리**
   1. 작물의 종류에서부터, 작업 카테고리 관리에 작업프로세서랑 연결해야된다. 
   2. 작물 유형관리에서, 각 작물들의 가능한 작업프로세서를 등록해야한다. 
   3. 작물의 종류에서 작물 작업프로세서의 등록, 수정이 편하도록 선택하여 각작물의 작업프로세서를 변경할수 있도록 해야한다. 

   **농지관리** 
   농지등록할때 선택된 작물에 따라 맞는 작업 프로세서들이 함께 등록 되어야한다. (작업프로세서는 각 단계가 자동으로 저장되어야한다. )

   1. 농지관리에서 게약이 완료 되면, 계약 내용을 입력하는 창으로 이동
   2. 계약이 완료 되어야지, 작업일정을 지정할수가 있다. 
   3. 작업일정은 작업프로세서 흐름에 따라 순서대로 완료가 되어야지 다음단계로 넘어갈수가 있다. 그리고 작업상태 변경은 예외가 있을수 있으니까 재작업을 추가해줘라, 재작업후에는 완료가 되어야한다.

   **지도추가**
   1. 작업 프로세스에 맞게 지도에 상태가 변경되어야 한다. 
   2. 지도는 모바일에서도 확인 가능해야 하며, 모바일에서도 농가를 클릭하면 그 위치로 갈수 있도록 해야한다. 그리고 gps에서 정보를 가지고와서 자기 위치를 나타낼수 있으면 좋겟다 . 
   4. fields/map에 로컬에서 실행할때는 잘 나오는데, vercal에 업로드하여 웹에서 볼때는 무한로딩이 되는 버그를 해결해줘!

- **v0.0.16**  
   1. 작업일정 디테일 페이지 완성해야함. 앞의 정보를 확인한후 디테일 페이지에 맞는 데이터 가져와 디테일 페이지 업데이트 UI도 직관적으로 업데이트
   2. 작업내역 디테일 페이지에서는 추가정산이 가능하도록 구현해주었으면 좋겠어 . 기존의 목록에서 정산설정을 완료하였지만, 추가로 정산을 더 해주어야할 작업팀들이 있을수 있기때문에 , 디테일 페이지에서 추가 정산을 할수 있도록 해주었으면 좋겠어 

- **v0.0.15**  
- **v0.0.14**  
- **v0.0.13**  
- **v0.0.12**
   - 빌드 완료 
   
- **v0.0.11**
    - 작업 리스트 완료! 
    - 작업 디테일 페이지 완성해야함 ! 


- **v0.0.10**
    - 작업등록 폼에서, 작업유형별로 필드 추가, 각 작업자를 선택할수 있도록 해야함, 
    - 작업등록폼에서 모든 작업유형별로 등록된 작업자들이 나타남, 
      카테고리에 다음 단계를 지정해주면 되지 그것을 활용하여, 다음 단계를 찾아서 알려주면 끝 ! 
      만약 다음단계가 없이 종료를 완성하면 끝 ! 
      끝나면 운송단계로 넘김! 

- **v0.0.9**
   - 작업반장 등록부분에 카테고리 - 종류별 단가 설정완료. 
   import CheckboxListSelector from '../common/CheckboxListSelector'; 삭제 
   - 작업반장 등록부분 완전 변경완료, 카테고리 - 종류 (단가완료)

- **v0.0.8**
작업자관리
    - 작업유형을 컬렉션으로 등록하고, 작업자를 생성할때 체크표시로 작업자의 작업유형을 선택할수 있게 해야함,
   
- **v0.0.7**
- 일정 리스트에서 : 예정에서 준비중으로 변경할 경우 반장이 선택되지 않았을경우 반장을 선택해야된다. 
    - 리스트에서 : 완료일 경우 , 수확량이나. 작업비를 입력해야한다. 
    - 리스트에서 깃대번호로 나타낼수 있어야 한다. 

- **v0.0.6**
   - 농지목록 : 작물종류 (컬렉션으로 관리) , 리스트(면단위나타내기 여러개의 농지가 있을수 있기때문에 목록에 다표시될수 있도록)
   - 지도 목록에 깃발로 표시해야함, 
   - 지도 ui를 좀더 잘 나타낼수 있도록 해야함. (깃발숫자, 그리고 진행중인것을 아이콘이나 잘 보이게 표시)
   - 작업등록시 , 기본정보 작업 예정지랑, 작업단가는 선택지로, 그리고 작업단가창을 추가할수 있도록 해야함, 한페이지에 놔두어야함 , 
   - 주소정보 공동컴포넌트에서 가져오기 
   - 작업일정 : 예정일경우에는 반장을 선택하지 않아도 된다.

- **v0.0.6**
   - 수정사항
   - 농가 관리  
      - 기본정보 컴포넌트화 , 
      - 주소 컴포넌트화 
      - 계좌 정보 컴포넌트화 
      - 면단위 , 주소에서 자동가져오기  
      - 결제소속 따로 컬렉션으로 관리 
      - 농가 디테일에 농지 계약 탭 활성화 , 
   - 농지목록
      - 지도 탭 활성화,
      - 농지의 타이틀을 깃대번호로 작성하기
   - 농지 등록
      - 농가 정보 : 이름 , 휴대폰번호, 면단위 가져오기 
      - 위치정보 컴포넌트에서 가져오기 + 위치정보 추가로 작성할수 있게 하기 + 깃대정보 입력 하나의 컴포넌트로 작성
      - 작물종류 컬렉션화하여 관리하기
      - 비고란 추가

- **v0.0.5**
   - 거의 다 완성 잡버그 수정중 

- **v0.0.4**
   - ContractDetail, ContractForm 미완성 나머지 코드들은 거의다완성,

- **v0.0.3**
   - 버그 pix

- **v0.0.2**
   - 농가 관리, 농지관리, 완료. 

- **v0.0.1**
   - 기초틀 공사중 오류많음 

- **v0.0.0**
  - 초기 로그인환경 구축 

## Prerequisites

- [Node.js](https://nodejs.org/) (v14 이상 권장)
- npm 또는 yarn 등 패키지 매니저
- Firebase 콘솔 계정 및 프로젝트 (이메일/비밀번호 인증 활성화 필요)

## Installation

1. **저장소 클론**
   ```bash
   git clone https://github.com/your-username/next-snp-management.git
   cd next-snp-management
